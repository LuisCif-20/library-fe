{
  "version": 3,
  "sources": ["src/app/core/services/configuration.service.ts"],
  "sourcesContent": ["import { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { computed, inject, Injectable, signal } from '@angular/core';\nimport { environment } from '@envs/environment';\nimport { catchError, map, Observable, throwError } from 'rxjs';\nimport { Configuration, UpdateConfiguration } from '../interfaces/configuration.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigurationService {\n\n  private readonly configurationUrl = `${environment.API_URL}/configuration`;\n\n  private http = inject(HttpClient);\n\n  private _configuration = signal<Configuration | null>(null);\n\n  public configuration = computed(() => this._configuration());\n\n  constructor() { }\n\n  private processRequest(req: Observable<Configuration>): Observable<boolean> {\n    return req.pipe(\n      map((configuration) => {\n        this._configuration.set(configuration);\n        return true;\n      }),\n      catchError((error: HttpErrorResponse) => throwError(() => error))\n    );\n  }\n\n  public getConfiguration(): Observable<boolean> {\n    return this.processRequest(this.http.get<Configuration>(this.configurationUrl));\n  }\n\n  public updateConfiguration(data: UpdateConfiguration): Observable<boolean> {\n    const formData = new FormData();\n    Object.keys(data).forEach((key) => {\n      const value = data[key as keyof UpdateConfiguration];\n      if (value) {\n        value instanceof Blob\n        ? formData.append(key, value)\n        : formData.append(key, value!.toString());\n      }\n    });\n    return this.processRequest(this.http.put<Configuration>(this.configurationUrl, formData));\n  }\n\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AASM,IAAO,uBAAP,MAAO,sBAAoB;EAEd,mBAAmB,GAAG,YAAY,OAAO;EAElD,OAAO,OAAO,UAAU;EAExB,iBAAiB,OAA6B,IAAI;EAEnD,gBAAgB,SAAS,MAAM,KAAK,eAAc,CAAE;EAE3D,cAAA;EAAgB;EAER,eAAe,KAA8B;AACnD,WAAO,IAAI,KACT,IAAI,CAAC,kBAAiB;AACpB,WAAK,eAAe,IAAI,aAAa;AACrC,aAAO;IACT,CAAC,GACD,WAAW,CAAC,UAA6B,WAAW,MAAM,KAAK,CAAC,CAAC;EAErE;EAEO,mBAAgB;AACrB,WAAO,KAAK,eAAe,KAAK,KAAK,IAAmB,KAAK,gBAAgB,CAAC;EAChF;EAEO,oBAAoB,MAAyB;AAClD,UAAM,WAAW,IAAI,SAAQ;AAC7B,WAAO,KAAK,IAAI,EAAE,QAAQ,CAAC,QAAO;AAChC,YAAM,QAAQ,KAAK,GAAgC;AACnD,UAAI,OAAO;AACT,yBAAiB,OACf,SAAS,OAAO,KAAK,KAAK,IAC1B,SAAS,OAAO,KAAK,MAAO,SAAQ,CAAE;MAC1C;IACF,CAAC;AACD,WAAO,KAAK,eAAe,KAAK,KAAK,IAAmB,KAAK,kBAAkB,QAAQ,CAAC;EAC1F;;qCArCW,uBAAoB;EAAA;4EAApB,uBAAoB,SAApB,sBAAoB,WAAA,YAFnB,OAAM,CAAA;;",
  "names": []
}
