{
  "version": 3,
  "sources": ["src/app/library/pipes/isbn.pipe.ts", "src/app/library/components/edit-book-modal/edit-book-modal.component.ts", "src/app/library/components/edit-book-modal/edit-book-modal.component.html", "src/app/library/pages/book-by-id-page/book-by-id-page.component.ts", "src/app/library/pages/book-by-id-page/book-by-id-page.component.html"],
  "sourcesContent": ["import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'isbn'\n})\nexport class IsbnPipe implements PipeTransform {\n\n  transform(value: number | string): string {\n    const val = value.toString();\n    return `${val.slice(0, 3)}-${val.slice(3, 6)}-${val.slice(6, 9)}-${val.slice(9, 12)}-${val.slice(12, 13)}`;\n  }\n\n}\n", "import { Component, inject, input, output, signal } from '@angular/core';\nimport { HoverStyleDirective } from 'src/app/shared/directives/hover-style.directive';\nimport { BookModalComponent } from '../book-modal/book-modal.component';\nimport { BooksStore } from '../../stores/books.store';\nimport { pipe, switchMap } from 'rxjs';\nimport { rxMethod } from '@ngrx/signals/rxjs-interop';\nimport { Book } from '../../interfaces/book.interface';\n\n@Component({\n  selector: 'edit-book-modal',\n  imports: [\n    HoverStyleDirective,\n    BookModalComponent\n  ],\n  templateUrl: './edit-book-modal.component.html',\n  styles: ``\n})\nexport class EditBookModalComponent {\n\n  public book =  input.required<Book>();\n  public updateBook = output<void>();\n\n  private readonly booksStore = inject(BooksStore);\n\n  public getBooks = rxMethod<void>(pipe(\n    switchMap(() => this.booksStore.getBooks())\n  ));\n\n  public showModal = signal<boolean>(false);\n\n  public onUpdateBook(): void {\n    this.getBooks();\n    this.updateBook.emit();\n  }\n\n}\n", "<button class=\"btn bg-blue-900 hover:bg-blue-900/90 text-white rounded-full\" hoverStyle (click)=\"showModal.set(true)\">\n  <span>edit</span>\n  Editar\n</button>\n@if (showModal()) {\n  <book-modal (closeModal)=\"showModal.set(false)\" (saveBook)=\"onUpdateBook()\" [book]=\"book()\" />\n}\n", "import { Component, computed, inject, OnInit, signal } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Book } from '../../interfaces/book.interface';\nimport { CurrencyPipe } from '@angular/common';\nimport { environment } from '@envs/environment';\nimport { IsbnPipe } from '../../pipes/isbn.pipe';\nimport { AuthStore } from 'src/app/auth/stores/auth.store';\nimport { EditBookModalComponent } from '../../components/edit-book-modal/edit-book-modal.component';\nimport { BookService } from '../../services/book.service';\nimport { AlertService } from 'src/app/shared/services/alert.service';\nimport { HoverStyleDirective } from 'src/app/shared/directives/hover-style.directive';\nimport { ReservationService } from '../../services/reservation.service';\nimport { HttpErrorResponse, HttpStatusCode } from '@angular/common/http';\n\n@Component({\n  selector: 'app-book-by-id-page',\n  imports: [\n    CurrencyPipe,\n    IsbnPipe,\n    EditBookModalComponent,\n    HoverStyleDirective\n  ],\n  templateUrl: './book-by-id-page.component.html',\n  styles: ``\n})\nexport default class BookByIdPageComponent implements OnInit {\n\n  private router = inject(Router);\n  private alerService = inject(AlertService);\n  private authStore = inject(AuthStore);\n  private activatedRoute = inject(ActivatedRoute);\n  private bookService = inject(BookService);\n  private reservationService = inject(ReservationService);\n\n  public book = signal<Book | null>(null);\n\n  public imageUrl = computed(() => `${environment.AWS_URL}/${this.book()?.imageUrl}`);\n  public role = computed(() => {\n    const user = this.authStore.user();\n    return user ? user.role.name : null;\n  });\n\n  constructor() { }\n\n  ngOnInit(): void {\n    this.activatedRoute.data.subscribe({\n      next: ({ book }) => this.book.set(book)\n    })\n  }\n\n  public updateView(): void {\n    this.bookService.getBookById(this.book()!.id).subscribe({\n      next: (book) => this.book.set(book)\n    });\n  }\n\n  public onDelete(): void {\n    this.bookService.deleteBook(this.book()!.id).subscribe({\n      next: () => {\n        this.alerService.showAlert('El libro fue eliminado.', 'success');\n        this.router.navigateByUrl('/library');\n      },\n      error: () => {\n        this.alerService.showAlert('El libro no existe.', 'warning');\n      }\n    });\n  }\n\n  public onReserv(): void {\n    this.reservationService.createReservation(this.book()!.id).subscribe({\n      next: () => {\n        this.alerService.showAlert('Tu reservacion se ha registrado.', 'success');\n        this.router.navigateByUrl('/library');\n      },\n      error: (error: HttpErrorResponse) => {\n        error.status === HttpStatusCode.NotFound\n          ? this.alerService.showAlert('El libro no existe.', 'warning')\n          : this.alerService.showAlert('Ya has reservado este libro.', 'info')\n      }\n    });\n  }\n\n}\n", "<div class=\"flex flex-col h-full p-10\">\n  <div class=\"grid grid-cols-1 md:grid-cols-3\">\n    <div class=\"w-full p-2 shadow-md bg-base-200 rounded-2xl flex justify-center\">\n      <img [src]=\"imageUrl()\" [alt]=\"book()?.title\" class=\"h-full object-cover object-center\">\n    </div>\n    <div class=\"w-full px-0 py-5 md:px-10 md:py-0 flex flex-col\">\n      <span class=\"font-bold text-2xl\">Informacion del Autor</span>\n      <span>Nombre: {{ book()!.author!.name }}</span>\n      <span>Fecha de Nacimiento: {{ book()!.author!.birthDate }}</span>\n      <span>Nacionalidad: {{ book()!.author.nationality }}</span>\n      <span class=\"font-bold text-2xl mt-5\">Informacion de la Editorial</span>\n      <span>Nombre: {{ book()!.publisher.name }}</span>\n      <span class=\"font-bold text-2xl mt-5\">Titulo</span>\n      <span>{{ book()!.title }}</span>\n      <span class=\"font-bold text-2xl mt-5\">Codigo</span>\n      <span>{{ book()!.code }}</span>\n    </div>\n    <div class=\"w-full px-0 md:px-10 flex flex-col\">\n      <span class=\"font-bold text-2xl\">Fecha de Publicacion</span>\n      <span>{{ book()!.publicationDate }}</span>\n      <span class=\"font-bold text-2xl mt-5\">Precio</span>\n      <span>{{ book()!.price | currency: 'Q ' }}</span>\n      <span class=\"font-bold text-2xl mt-5\">Disponibles</span>\n      <span>{{ book()!.availableCopies }} - Unidades</span>\n      <span class=\"font-bold text-2xl mt-5\">ISBN</span>\n      <span>{{ book()!.isbn | isbn }}</span>\n    </div>\n  </div>\n  @if (role()) {\n    <div class=\"w-full p-2 py-5 flex justify-start\">\n      @if(role() === 'LIBRARIAN') {\n        <edit-book-modal [book]=\"book()!\" (updateBook)=\"updateView()\" />\n        <button class=\"btn btn-error text-white rounded-full ml-3\" hoverStyle (click)=\"onDelete()\">\n          <span>delete</span>\n          Eliminar\n        </button>\n      } @else {\n        @if (book()!.availableCopies === 0) {\n          <button class=\"btn btn-primary text-white rounded-full\" hoverStyle (click)=\"onReserv()\">\n            <span>local_library</span>\n            Reservar\n          </button>\n        }\n      }\n    </div>\n  }\n</div>\n"],
  "mappings": "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",
  "names": []
}
